---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "f5distributedcloud_app_firewall Resource - f5distributedcloud"
subcategory: ""
description: |-
  The f5distributedcloud_app_firewall resource manages Application Firewall (WAF) policies in F5 Distributed Cloud.
  Application Firewall policies define web application security settings including
  detection modes, bot protection, and custom blocking pages.
  Example Usage
  
  resource "f5distributedcloud_app_firewall" "example" {
    name        = "my-app-firewall"
    namespace   = "my-namespace"
    description = "Example Application Firewall"
    mode        = "blocking"
  
    detection_settings {
      signature_based_bot_protection = true
      xhr_check                      = true
      cookie_protection              = true
      violation_rating               = "medium"
    }
  
    bot_protection {
      good_bot_action       = "allow"
      malicious_bot_action  = "block"
      suspicious_bot_action = "challenge"
    }
  }
  
  Import
  App Firewalls can be imported using namespace/name:
  
  terraform import f5distributedcloud_app_firewall.example my-namespace/my-app-firewall
---

# f5distributedcloud_app_firewall (Resource)

The `f5distributedcloud_app_firewall` resource manages Application Firewall (WAF) policies in F5 Distributed Cloud.

Application Firewall policies define web application security settings including
detection modes, bot protection, and custom blocking pages.

## Example Usage

```hcl
resource "f5distributedcloud_app_firewall" "example" {
  name        = "my-app-firewall"
  namespace   = "my-namespace"
  description = "Example Application Firewall"
  mode        = "blocking"

  detection_settings {
    signature_based_bot_protection = true
    xhr_check                      = true
    cookie_protection              = true
    violation_rating               = "medium"
  }

  bot_protection {
    good_bot_action       = "allow"
    malicious_bot_action  = "block"
    suspicious_bot_action = "challenge"
  }
}
```

## Import

App Firewalls can be imported using namespace/name:

```shell
terraform import f5distributedcloud_app_firewall.example my-namespace/my-app-firewall
```

## Example Usage

```terraform
# Copyright (c) Robin Mordasiewicz
# SPDX-License-Identifier: MPL-2.0

# Example: Basic App Firewall in Monitoring Mode
resource "f5distributedcloud_app_firewall" "basic" {
  name        = "basic-app-firewall"
  namespace   = "my-namespace"
  description = "Basic Application Firewall in monitoring mode"
  mode        = "monitoring"

  detection_settings {
    signature_based_bot_protection = true
    violation_rating               = "medium"
  }
}

# Example: App Firewall in Blocking Mode
resource "f5distributedcloud_app_firewall" "blocking" {
  name        = "blocking-app-firewall"
  namespace   = "my-namespace"
  description = "Application Firewall in blocking mode"
  mode        = "blocking"

  detection_settings {
    signature_based_bot_protection = true
    xhr_check                      = true
    cookie_protection              = true
    enable_suppression             = false
    violation_rating               = "high"
  }

  default_anonymization      = true
  use_default_blocking_page = true
}

# Example: App Firewall with Bot Protection
resource "f5distributedcloud_app_firewall" "with_bot_protection" {
  name        = "bot-protected-firewall"
  namespace   = "my-namespace"
  description = "Application Firewall with comprehensive bot protection"
  mode        = "blocking"

  detection_settings {
    signature_based_bot_protection = true
    xhr_check                      = true
    cookie_protection              = true
    violation_rating               = "medium"
  }

  bot_protection {
    good_bot_action       = "allow"
    malicious_bot_action  = "block"
    suspicious_bot_action = "challenge"
  }
}

# Example: App Firewall with Custom Blocking Page
resource "f5distributedcloud_app_firewall" "custom_blocking" {
  name        = "custom-blocking-firewall"
  namespace   = "my-namespace"
  description = "Application Firewall with custom blocking page"
  mode        = "blocking"

  detection_settings {
    signature_based_bot_protection = true
    violation_rating               = "medium"
  }

  use_default_blocking_page = false

  custom_blocking_page {
    blocking_page_body = <<-EOT
      <!DOCTYPE html>
      <html>
      <head>
        <title>Access Denied</title>
        <style>
          body { font-family: Arial, sans-serif; text-align: center; padding: 50px; }
          h1 { color: #d9534f; }
        </style>
      </head>
      <body>
        <h1>Access Denied</h1>
        <p>Your request has been blocked by our security system.</p>
        <p>If you believe this is an error, please contact support.</p>
      </body>
      </html>
    EOT
    response_code      = "403"
  }
}

# Example: App Firewall with Labels
resource "f5distributedcloud_app_firewall" "labeled" {
  name        = "labeled-app-firewall"
  namespace   = "my-namespace"
  description = "Application Firewall with labels"
  mode        = "monitoring"

  detection_settings {
    signature_based_bot_protection = true
    violation_rating               = "low"
  }

  labels = {
    environment = "production"
    team        = "security"
    compliance  = "pci-dss"
  }
}

# Example: Comprehensive App Firewall Configuration
resource "f5distributedcloud_app_firewall" "comprehensive" {
  name        = "comprehensive-app-firewall"
  namespace   = "my-namespace"
  description = "Comprehensive Application Firewall configuration"
  mode        = "blocking"

  detection_settings {
    signature_based_bot_protection = true
    xhr_check                      = true
    cookie_protection              = true
    enable_suppression             = true
    violation_rating               = "high"
  }

  bot_protection {
    good_bot_action       = "allow"
    malicious_bot_action  = "block"
    suspicious_bot_action = "challenge"
  }

  allowed_response_codes    = ["200", "201", "204", "301", "302", "400", "401", "403", "404"]
  default_anonymization     = true
  use_default_blocking_page = true

  labels = {
    environment = "production"
    team        = "security"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) Name of the App Firewall.
- `namespace` (String) Namespace where the App Firewall is created.

### Optional

- `allowed_response_codes` (List of String) List of HTTP response codes that are allowed.
- `bot_protection` (Block, Optional) Bot protection settings. (see [below for nested schema](#nestedblock--bot_protection))
- `custom_blocking_page` (Block, Optional) Custom blocking page configuration. (see [below for nested schema](#nestedblock--custom_blocking_page))
- `default_anonymization` (Boolean) Enable default anonymization of sensitive data.
- `description` (String) Description of the App Firewall.
- `detection_settings` (Block, Optional) Detection settings for the firewall. (see [below for nested schema](#nestedblock--detection_settings))
- `labels` (Map of String) Labels to apply to the App Firewall.
- `mode` (String) Firewall mode: 'monitoring' or 'blocking'.
- `use_default_blocking_page` (Boolean) Use the default blocking page for blocked requests.

### Read-Only

- `id` (String) Unique identifier for the App Firewall.

<a id="nestedblock--bot_protection"></a>
### Nested Schema for `bot_protection`

Optional:

- `good_bot_action` (String) Action for good bots: 'allow', 'block', or 'challenge'.
- `malicious_bot_action` (String) Action for malicious bots: 'allow', 'block', or 'challenge'.
- `suspicious_bot_action` (String) Action for suspicious bots: 'allow', 'block', or 'challenge'.


<a id="nestedblock--custom_blocking_page"></a>
### Nested Schema for `custom_blocking_page`

Required:

- `blocking_page_body` (String) HTML body content for the custom blocking page.

Optional:

- `response_code` (String) HTTP response code for the blocking page.


<a id="nestedblock--detection_settings"></a>
### Nested Schema for `detection_settings`

Optional:

- `cookie_protection` (Boolean) Enable cookie protection.
- `enable_suppression` (Boolean) Enable violation suppression.
- `signature_based_bot_protection` (Boolean) Enable signature-based bot protection.
- `violation_rating` (String) Violation rating threshold: 'low', 'medium', or 'high'.
- `xhr_check` (Boolean) Enable XHR request checking.
